<ion-view>
  <ion-nav-bar class="bar-stable">
    <ion-nav-buttons side="left">
      <button class="button icon-left ion-chevron-left button-clear button-dark" on-tap="goToSettings();">Back</button>
    </ion-nav-buttons>
  </ion-nav-bar>

  <ion-content padding="true">
    <div class="card">

      <div class="item item-text-wrap item-divider text-center">
        <h2>Change Password</h2>
        <div ng-bind-html="recoveredMessage"></div>
      </div>

      <div class="item item-text-wrap text-center">

        <form name="changePasswordForm" class="list password-form" novalidate>

          <ion-list>

            <label class="item item-input">
                <span class="input-label">Password</span>
                <input type="password" placeholder="********" ng-model="data.currentPassword" name="password" ng-minlength="5" ui-show-password required>
            </label>

            <label class="item item-input">
                <span class="input-label">New Password</span>
                <input type="password" placeholder="********" ng-model="data.newPassword" name="newPassword" ng-minlength="5" ui-show-password required>
            </label>

            <label class="item item-input">
                <span class="input-label">Confirm New Password</span>
                <input type="password" placeholder="********" ng-model="data.confirmNewPassword" name="confirmNewPassword" ui-show-password ng-minlength="5" required>
            </label>

            <p class="error-message" ng-show="(changePasswordForm.newPassword.$error.minlength || changePasswordForm.confirmNewPassword.$error.minlength )">Password must be at least 5 characters long</p>
            <p class="error-message" ng-show="(data.newPassword !== data.confirmNewPassword)">The new passwords should match</p>

            <div ng-bind-html="message"></div>

            <button class="button button-stable button-block" on-tap="doChangePassword();" ng-disabled="changePasswordForm.$invalid">
              Change Password
            </button>

          </ion-list>

        </form>

      </div>

    </div>
  </ion-content>

</ion-view>
